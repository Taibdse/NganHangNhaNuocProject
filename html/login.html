<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <!-- font awesome css -->
  <link rel="stylesheet" href="../plugins/font-awesome-4.7.0/css/font-awesome.min.css">

  <!-- Bootstrap core css -->
  <link rel="stylesheet" href="../MDB Free/css/bootstrap.min.css">

  <!-- Meterial Design Bootstrap -->
  <link rel="stylesheet" href="../MDB Free/css/mdb.min.css">

  <!-- datepicker css -->
  <link rel="stylesheet" href="../plugins/bootstrap-datetimepicker/css/bootstrap-datepicker3.min.css">

  <!-- bootstrap datetime picker css -->
  <link rel="stylesheet" href="../plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css">

  <!-- pagination css -->
  <link rel="stylesheet" href="../plugins/paginationJs/pagination.css">
  
  <style>
    body{
      background-color: #dce1ea;
    }
    .card{
     width: 400px;
     margin: 50px auto;
   }
   .form-control{
     border-radius: 15px;
   }
   .btn-custom {
      font-size: 0.9em;
      padding: 7px 10px;
      text-transform: none;
      border-radius: 15px;
    }
    
  </style>
  <title>Đăng nhập</title>

</head>

<body>
  <header class="">
    <img src="../img/banner5.png" alt="" class="img-fluid">
  </header>
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            Đăng nhập
          </div>
          <div class="card-body">
            <form action="" id="loginForm">
              <div class="form-group">
                <label for="">Tên người dùng</label>
                <input type="text" class="form-control" placeholder="Nhập tên người dùng..." id="txtUsername">
              </div>
              <div class="form-group">
                <label for="">Mật khẩu</label>
                <input type="password" class="form-control" placeholder="Nhập mật khẩu..." id="txtPasword">
              </div>
              <button class="btn btn-custom btn-success pull-right">Đăng nhập</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- JQuery core -->
  <script src="../MDB Free/js/jquery-3.3.1.min.js"></script>

  <!-- popper js core -->
  <script src="../MDB Free/js/popper.min.js"></script>

  <!-- bootstrap js core -->
  <script src="../MDB Free/js/bootstrap.min.js"></script>

  <!-- Meterail Design Bootstrap JS -->
  <script src="../MDB Free/js/mdb.min.js"></script>

  <!-- bootstrap datepicker js -->
  <script src="../plugins/bootstrap-datetimepicker/js/bootstrap-datepicker.min.js"></script>

  <!-- sweetalert js -->
  <script src="../plugins/sweetalert/js/sweetalert.min.js"></script>

  <!-- datetimepicker js -->
  <script src="../plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>

  <!-- sweetalert js -->
  <script src="../plugins/sweetalert/js/sweetalert.min.js"></script>

  <!-- main js -->
  <script src="../custom/js/main.js"></script>

  <!-- services -->
  <script src="../custom/js/services/common.service.js"></script>
  <script src="../custom/js/services/alert.service.js"></script>
  <script src="../custom/js/services/time.service.js"></script>
  <script src="../custom/js/services/exportExcel.service.js"></script>
  <script src="../custom/js/services/validation.service.js"></script>
  <script src="../custom/js/services/remove-vn-accent.service.js"></script>
  <script src="../custom/js/services/filter.service.js"></script>
  <script src="../custom/js/services/user.service.js"></script>
  <script src="../custom/js/services/position.service.js"></script>
  <script src="../custom/js/services/department.service.js"></script>
  <script src="../custom/js/services/super-department.service.js"></script>

  <script>
    let $loginForm = $('#loginForm');
    let $txtUsername = $('#txtUsername');
    let $txtPasword = $('#txtPasword');

    $loginForm.submit(onSubmit);

    async function onSubmit(e){
      e.preventDefault();
      let sUsername = $txtUsername.val();
      let sPassword = $txtPasword.val();
      let res = await checkLogin(sUsername, sPassword);
      console.log(res);
      if(JSON.parse(res).length == 0) return AlertService.showAlertError('Không thành công!!', 'Tên người dùng và mật khẩu không đúng');
      sessionStorage.setItem('authenticatedUser', res);
      location.href = 'main-page.html';
    } 

  </script>
</body>

</html>